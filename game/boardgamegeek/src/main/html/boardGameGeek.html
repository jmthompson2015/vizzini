<html>
<head>
<title>BGG Game Finder</title>

<link rel="stylesheet" href="../css/style.css">

<script src="../../../../../coreweb/lib/jquery/jquery-1.11.3.min.js"></script>
<script src="../../../../../coreweb/lib/microevent/microevent-1.0.0.js"></script>
<script src="../../../../../coreweb/lib/react/react-15.3.2.js"></script>
<script src="../../../../../coreweb/lib/react-dom/react-dom-15.3.2.js"></script>
<script src="../../../../../coreweb/lib/reactable/reactable-0.14.0.js"></script>
<script src="../../../../../coreweb/lib/require/require-2.3.2.js" data-main="../js/GameDatabase"></script>

<script src="../../../../../coreweb/src/main/js/ui/InputPanel.js"></script>
<script src="../../../../../coreweb/src/main/js/ui/CheckboxInputPanel.js"></script>

<script src="../../../../../coreweb/src/main/js/util/Logger.js"></script>
<script src="../../../../../coreweb/src/main/js/util/InputValidator.js"></script>
<script src="../../../../../coreweb/src/main/js/util/ArrayAugments.js"></script>
<script src="../../../../../coreweb/src/main/js/util/StringAugments.js"></script>

</head>
<body>
	<h1>
		<a href="https://www.boardgamegeek.com"><img id="bgg_cornerlogo" src="../resources/bgg_cornerlogo.png" /></a> Game
		Finder
	</h1>
	<section>
		<div id="filters"></div>
	</section>
	<section>
		<div id="gameTable"></div>
	</section>
	<script>
        "use strict";

        var LOGGER = new Logger();
        LOGGER.setTraceEnabled(false);
        LOGGER.setDebugEnabled(false);

        require([ "FilterUI", "GameDatabase", "GameTable" ], function(FilterUI, GameDatabase, GameTable)
        {
            var numPages = 5;
            var gameDatabase = new GameDatabase(numPages);
            gameDatabase.bind("dataLoaded", renderFilter);
            gameDatabase.bind("dataLoaded", renderTable);

            var filterUI = ReactDOM.render(React.createElement(FilterUI,
            {
                gameDatabase: gameDatabase,
            }), document.getElementById("filters"));

            filterUI.bind("applyFilters", gameDatabase.setFilters);

            gameDatabase.load();

            function renderFilter()
            {
                ReactDOM.render(React.createElement(FilterUI,
                {
                    gameDatabase: gameDatabase,
                }), document.getElementById("filters"));
            }

            function renderTable()
            {
                ReactDOM.render(React.createElement(GameTable,
                {
                    gameDatabase: gameDatabase,
                }), document.getElementById("gameTable"));
            }
        });
    </script>
</body>
</html>
