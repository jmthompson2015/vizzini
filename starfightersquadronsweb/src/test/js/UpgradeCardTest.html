<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>UpgradeCardTest</title>

<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.15.0.css">
<script src="http://code.jquery.com/qunit/qunit-1.15.0.js"></script>

<script src="../../../../coreweb/src/main/js/util/JavaScriptAugments.js"></script>
<script src="../../../../coreweb/src/main/js/util/Logger.js"></script>
<script src="../../../../coreweb/src/main/js/util/InputValidator.js"></script>
<script src="../../../../coreweb/src/main/js/util/ArrayAugments.js"></script>

<script src="../../main/js/Team.js"></script>
<script src="../../main/js/Maneuver.js"></script>
<script src="../../main/js/ShipAction.js"></script>
<script src="../../main/js/Ship.js"></script>
<script src="../../main/js/ShipTeam.js"></script>
<script src="../../main/js/RangeRuler.js"></script>
<script src="../../main/js/Weapon.js"></script>
<script src="../../main/js/UpgradeCard.js"></script>
<script src="../../main/js/Pilot.js"></script>

<script>
    "use strict";
    var LOGGER = new Logger();

    QUnit.test("UpgradeType properties Astromech", function(assert)
    {
        var type = UpgradeType.ASTROMECH;
        var properties = UpgradeType.properties[type];
        assert.equal(properties.displayName, "Astromech");
        assert.equal(properties.value, "astromech");
    });

    QUnit.test("UpgradeType.values()", function(assert)
    {
        var result = UpgradeType.values();
        assert.ok(result);
        assert.equal(result.length, 16);
        assert.equal(result[0], UpgradeType.ASTROMECH);
        assert.equal(result[15], UpgradeType.TURRET);
    });

    QUnit
            .test(
                    "UpgradeCard properties Adrenaline Rush",
                    function(assert)
                    {
                        var upgrade = UpgradeCard.ADRENALINE_RUSH;
                        var properties = UpgradeCard.properties[upgrade];
                        assert.equal(properties.name, "Adrenaline Rush");
                        assert.equal(properties.type, UpgradeType.ELITE);
                        assert.ok(!properties.restrictions);
                        assert
                                .equal(
                                        properties.description,
                                        "When you reveal a red maneuver, you may discard this card to treat that manuever as a white maneuver until the end of the Activation phase.");
                        assert.equal(properties.squadPointCost, 1);
                        assert.equal(properties.value, "adrenalineRush");
                    });

    QUnit
            .test(
                    "UpgradeCard properties C-3PO",
                    function(assert)
                    {
                        // Setup.
                        var upgradeCard = UpgradeCard.C_3PO;

                        // Run.
                        var result = UpgradeCard.properties[upgradeCard];

                        // Verify.
                        assert.ok(result);
                        assert.equal(result.name, "C-3PO");
                        assert.equal(result.type, UpgradeType.CREW);
                        assert.ok(result.restrictions);
                        assert.equal(result.restrictions.length, 1);
                        assert.equal(result.restrictions[0],
                                UpgradeRestriction.REBEL_ONLY);
                        assert
                                .equal(
                                        result.description,
                                        "Once per round, before you roll 1 or more defense dice, you may guess aloud a number of Evade results. If you roll that many Evade results (before modifying dice), add 1 Evade result.");
                        assert.equal(result.squadPointCost, 3);
                        assert.equal(result.hasAction, false);
                        assert.equal(result.value, upgradeCard);
                    });

    QUnit.test("UpgradeCard.values()", function(assert)
    {
        // Run.
        var result = UpgradeCard.values();

        // Verify.
        assert.ok(result);
        assert.equal(result.length, 121);
        assert.equal(result[0], UpgradeCard.ADRENALINE_RUSH);
        assert.equal(result[120], UpgradeCard.PROTON_TORPEDOES);
    });

    QUnit.test("UpgradeCard.valuesByPilotAndType() Astromech", function(assert)
    {
        // Run.
        var result = UpgradeCard.valuesByPilotAndType(Pilot.LUKE_SKYWALKER,
                UpgradeType.ASTROMECH);

        // Verify.
        assert.ok(result);
        assert.equal(result.length, 12);
        assert.equal(result[0], UpgradeCard.R2_ASTROMECH);
        assert.equal(result[11], UpgradeCard.R7_T1);
    });

    QUnit.test("UpgradeCard.valuesByPilotAndType() Elite", function(assert)
    {
        // Run.
        var result = UpgradeCard.valuesByPilotAndType(Pilot.DARTH_VADER,
                UpgradeType.ELITE);

        // Verify.
        assert.ok(result);
        assert.equal(result.length, 22);
        var i = 0;
        assert.equal(result[i++], UpgradeCard.ADRENALINE_RUSH);
        assert.equal(result[i++], UpgradeCard.DAREDEVIL);
        assert.equal(result[i++], UpgradeCard.DEADEYE);
        assert.equal(result[i++], UpgradeCard.DECOY);
        assert.equal(result[i++], UpgradeCard.DETERMINATION);
        assert.equal(result[i++], UpgradeCard.DRAW_THEIR_FIRE);
        assert.equal(result[i++], UpgradeCard.ELUSIVENESS);
        assert.equal(result[i++], UpgradeCard.EXPERT_HANDLING);
        assert.equal(result[i++], UpgradeCard.EXPOSE);
        assert.equal(result[i++], UpgradeCard.INTIMIDATION);
        assert.equal(result[i++], UpgradeCard.LONE_WOLF);
        assert.equal(result[i++], UpgradeCard.MARKSMANSHIP);
        assert.equal(result[i++], UpgradeCard.OPPORTUNIST);
        assert.equal(result[i++], UpgradeCard.OUTMANEUVER);
        assert.equal(result[i++], UpgradeCard.PREDATOR);
        assert.equal(result[i++], UpgradeCard.PUSH_THE_LIMIT);
        assert.equal(result[i++], UpgradeCard.RUTHLESSNESS);
        assert.equal(result[i++], UpgradeCard.SQUAD_LEADER);
        assert.equal(result[i++], UpgradeCard.STAY_ON_TARGET);
        assert.equal(result[i++], UpgradeCard.SWARM_TACTICS);
        assert.equal(result[i++], UpgradeCard.VETERAN_INSTINCTS);
        assert.equal(result[i++], UpgradeCard.WINGMAN);
    });
</script>
</head>
<body>
	<div id="qunit"></div>
</body>
</html>
