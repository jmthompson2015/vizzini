<!DOCTYPE html>
<html>
<head>
<title>MyTestCombatUI</title>

<link rel="stylesheet" href="../../../main/css/style.css">

<script src="../../../../../coreweb/lib/react/react-0.13.3.js"></script>
<script src="../../../../../coreweb/lib/microevent/microevent-1.0.0.js"></script>

<script src="../../../../../coreweb/src/main/js/util/JavaScriptAugments.js"></script>
<script src="../../../../../coreweb/src/main/js/util/Logger.js"></script>
<script src="../../../../../coreweb/src/main/js/util/InputValidator.js"></script>
<script src="../../../../../coreweb/src/main/js/util/ArrayAugments.js"></script>
<script src="../../../../../coreweb/src/main/js/util/HtmlUtilities.js"></script>

<script src="../../../../../coreweb/src/main/js/ui/OptionPane.js"></script>
<script src="../../../../../coreweb/src/main/js/ui/InputPanel.js"></script>

<script src="../../../main/js/RangeRuler.js"></script>
<script src="../../../main/js/Weapon.js"></script>
<script src="../../../main/js/TurretWeapon.js"></script>
<script src="../../../main/js/Team.js"></script>
<script src="../../../main/js/FiringArc.js"></script>
<script src="../../../main/js/Bearing.js"></script>
<script src="../../../main/js/Difficulty.js"></script>
<script src="../../../main/js/Maneuver.js"></script>
<script src="../../../main/js/ShipAction.js"></script>
<script src="../../../main/js/ShipBase.js"></script>
<script src="../../../main/js/Ship.js"></script>
<script src="../../../main/js/ShipTeam.js"></script>
<script src="../../../main/js/ShipState.js"></script>
<script src="../../../main/js/UpgradeRestriction.js"></script>
<script src="../../../main/js/UpgradeType.js"></script>
<script src="../../../main/js/UpgradeCard.js"></script>
<script src="../../../main/js/Pilot.js"></script>
<script src="../../../main/js/DamageCard.js"></script>
<script src="../../../main/js/Adjudicator.js"></script>
<script src="../../../main/js/Phase.js"></script>
<script src="../../../main/js/Environment.js"></script>
<script src="../../../main/js/Position.js"></script>
<script src="../../../main/js/SimpleAgent.js"></script>
<script src="../../../main/js/SquadBuilder.js"></script>
<script src="../../../main/js/Token.js"></script>
<script src="../../../main/js/AttackDice.js"></script>
<script src="../../../main/js/DefenseDice.js"></script>
<script src="../../../main/js/ModifyAttackDiceAction.js"></script>
<script src="../../../main/js/ModifyDefenseDiceAction.js"></script>
<script src="../../../main/js/DamageDealer.js"></script>

<script src="../../../main/js/ui/CombatUI.js"></script>
<script src="../../../main/js/ui/HumanAgent.js"></script>
<script src="../../../main/js/ui/ImageUtilities.js"></script>
<script src="../../../main/js/ui/PilotCardUI.js"></script>
<script src="../../../main/js/ui/ShipActionChooser.js"></script>

</head>
<body>
	<table>
		<tr>
			<td>
				<div id="inputArea0"></div>
			</td>
		</tr>
		<tr>
			<td style="padding-top: 20px;">
				<div id="inputArea1"></div>
			</td>
		</tr>
		<tr>
			<td style="padding-top: 20px;">
				<div id="inputArea2"></div>
			</td>
		</tr>
	</table>
	<script>
        "use strict";
        var LOGGER = new Logger();
        LOGGER.setTraceEnabled(false);
        LOGGER.setDebugEnabled(false);

        var environment = Environment.createCoreSetEnvironment();
        var attacker = environment.getTokens()[0];
        LOGGER.debug("attacker = " + attacker);
        attacker.increaseFocusCount();
        var attackDice = new AttackDice(5);
        var defender = environment.getTokens()[2];
        LOGGER.debug("defender = " + defender);
        defender.increaseFocusCount();
        defender.increaseEvadeCount();
        var modifications0 = [ null, ModifyAttackDiceAction.Modification.SPEND_FOCUS ];

        var element0 = React.createElement(CombatUI,
        {
            phase: Phase.COMBAT_ROLL_ATTACK_DICE,
            attacker: attacker,
            attackDice: attackDice,
            defender: defender,
            modifications: modifications0,
            okFunction: myOK0,
        });
        React.render(element0, document.getElementById("inputArea0"));

        var defenseDice = new DefenseDice(4);
        var modifications1 = [ null, ModifyDefenseDiceAction.Modification.SPEND_EVADE,
                ModifyDefenseDiceAction.Modification.SPEND_FOCUS ];

        var element1 = React.createElement(CombatUI,
        {
            phase: Phase.COMBAT_ROLL_DEFENSE_DICE,
            attacker: attacker,
            attackDice: attackDice,
            defender: defender,
            defenseDice: defenseDice,
            modifications: modifications1,
            okFunction: myOK1,
        });
        React.render(element1, document.getElementById("inputArea1"));

        var hitCount = attackDice.getHitCount();
        var criticalHitCount = attackDice.getCriticalHitCount();
        var evadeCount = defenseDice.getEvadeCount();
        var damageDealer = new DamageDealer(environment, hitCount, criticalHitCount, defender, evadeCount);

        var element2 = React.createElement(CombatUI,
        {
            phase: Phase.COMBAT_MODIFY_DEFENSE_DICE,
            attacker: attacker,
            attackDice: attackDice,
            defender: defender,
            defenseDice: defenseDice,
            hitCount: damageDealer.getHits(),
            criticalHitCount: damageDealer.getCriticalHits(),
            okFunction: myOK2,
        });
        React.render(element2, document.getElementById("inputArea2"));

        function myOK0()
        {
            LOGGER.info("myOK0()");
        }

        function myOK1(modification)
        {
            LOGGER.info("myOK1() modification = " + modification);
        }

        function myOK2()
        {
            LOGGER.info("myOK2()");
        }
    </script>
</body>
</html>
