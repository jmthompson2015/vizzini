<!DOCTYPE html>
<html lang="en">
<head>
<title>Ship Gallery</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../css/style.css">

<script src="../../../../coreweb/lib/microevent/microevent-1.0.0.js"></script>
<script src="../../../../coreweb/lib/react/react-0.13.3.js"></script>
<script src="../../../../coreweb/lib/require/require-2.1.22.js" data-main="../../main/js/Team"></script>

<script src="../../../../coreweb/src/main/js/util/JavaScriptAugments.js"></script>
<script src="../../../../coreweb/src/main/js/util/Logger.js"></script>
<script src="../../../../coreweb/src/main/js/util/InputValidator.js"></script>
<script src="../../../../coreweb/src/main/js/util/ArrayAugments.js"></script>

<style>
.galleryTable {
    background-color: black;
    border-collapse: collapse;
}

.galleryCell {
    border: 3px solid lightGray;
    padding: 5px;
    text-align: center;
}

.shipName {
    color: white;
}
</style>
</head>
<body>
	<h1>Starfighter Squadrons Ship Gallery</h1>
	<h2>Imperial</h2>
	<div id="imperialShips"></div>
	<h2>Rebel</h2>
	<div id="rebelShips"></div>
	<h2>Scum &amp; Villainy</h2>
	<div id="scumShips"></div>
	<h2>First Order</h2>
	<div id="firstOrderShips"></div>
	<script>
        "use strict";
        var LOGGER = new Logger();

        var resourceBase = "https://raw.githubusercontent.com/jmthompson2015/vizzini/master/starfightersquadronsweb/src/main/resources/";
        var audioBase = resourceBase + "audio/";
        var iconBase = resourceBase + "icons/";
        var imageBase = resourceBase + "images/";

        require([ "Pilot", "Ship", "ShipTeam", "SimpleAgent", "SquadBuilder", "Team", "Token", "ui/ManeuverChooser" ],
                function(Pilot, Ship, ShipTeam, SimpleAgent, SquadBuilder, Team, Token, ManeuverChooser)
                {
                    var imageBase = "../resources/images/ship/";
                    var ShipGallery = React.createClass(
                    {
                        render: function()
                        {
                            var team = this.props.team;
                            var shipTeams = ShipTeam.valuesByTeam(team);
                            var agent = new SimpleAgent("Agent", team, SquadBuilder.CoreSetImperialSquadBuilder);

                            var cells0 = [];
                            var cells1 = [];
                            var cells2 = [];

                            shipTeams.forEach(function(shipTeam, i)
                            {
                                var shipName = ShipTeam.properties[shipTeam].name;
                                var filename = imageBase + ShipTeam.properties[shipTeam].image;
                                var pilot = Pilot.valuesByShipTeam(shipTeam)[0];
                                var token = new Token(pilot, agent);

                                var image = React.DOM.img(
                                {
                                    src: filename
                                });
                                var chooser = React.createElement(ManeuverChooser,
                                {
                                    token: token,
                                    isPilotNameShown: false,
                                });
                                cells0.push(React.DOM.td(
                                {
                                    key: "image" + i,
                                    className: "galleryCell"
                                }, image));
                                cells1.push(React.DOM.td(
                                {
                                    key: "name" + i,
                                    className: "galleryCell"
                                }, shipName));
                                cells2.push(React.DOM.td(
                                {
                                    key: "maneuvers" + i,
                                    className: "galleryCell alignTop"
                                }, chooser));
                            });

                            var rows = [];
                            rows.push(React.DOM.tr(
                            {
                                key: 0
                            }, cells0));
                            rows.push(React.DOM.tr(
                            {
                                key: 1,
                                className: "shipName"
                            }, cells1));
                            rows.push(React.DOM.tr(
                            {
                                key: 2
                            }, cells2));
                            return React.DOM.table(
                            {
                                className: "galleryTable"
                            }, rows);
                        }
                    });

                    var element0 = React.createElement(ShipGallery,
                    {
                        team: Team.IMPERIAL
                    });
                    React.render(element0, document.getElementById("imperialShips"));
                    var element1 = React.createElement(ShipGallery,
                    {
                        team: Team.REBEL
                    });
                    React.render(element1, document.getElementById("rebelShips"));
                    var element2 = React.createElement(ShipGallery,
                    {
                        team: Team.SCUM
                    });
                    React.render(element2, document.getElementById("scumShips"));
                    var element3 = React.createElement(ShipGallery,
                    {
                        team: Team.FIRST_ORDER
                    });
                    React.render(element3, document.getElementById("firstOrderShips"));
                });
    </script>
</body>
</html>
