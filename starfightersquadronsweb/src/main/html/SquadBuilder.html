<!DOCTYPE html>
<html lang="en">
<head>
<title>Squad Builder</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../css/style.css">
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
</script>
<![endif]-->

<script src="../../../../coreweb/lib/react/react-0.13.3.js"></script>
<script src="../../../../coreweb/lib/react/JSXTransformer-0.13.3.js"></script>
<script src="../../../../coreweb/lib/microevent/microevent-1.0.0.js"></script>

<script src="../../../../coreweb/src/main/js/util/JavaScriptAugments.js"></script>
<script src="../../../../coreweb/src/main/js/util/Logger.js"></script>
<script src="../../../../coreweb/src/main/js/util/InputValidator.js"></script>
<script src="../../../../coreweb/src/main/js/util/ArrayAugments.js"></script>

<script src="../js/Team.js"></script>
<script src="../js/Maneuver.js"></script>
<script src="../js/ShipAction.js"></script>
<script src="../js/Ship.js"></script>
<script src="../js/ShipTeam.js"></script>
<script src="../js/RangeRuler.js"></script>
<script src="../js/UpgradeCard.js"></script>
<script src="../js/Weapon.js"></script>
<script src="../js/Pilot.js"></script>
<script src="../js/SquadBuilder.js"></script>
<script src="../js/SimpleAgent.js"></script>
<script src="../js/DamageCard.js"></script>
<script src="../js/Token.js"></script>

<script src="../js/ui/PilotCardUI.js"></script>
<script src="../js/ui/PilotChooser.js"></script>
<script src="../js/ui/SquadUI.js"></script>
<script src="../js/ui/UpgradeCardUI.js"></script>
<script src="../js/ui/UpgradeChooser.js"></script>

<script type="text/jsx" src="../js/ui/SquadBuilderUI.js"></script>

<style>
.factionTable {
    background-color: #F0F0F0;
}
</style>
</head>
<body>
	<table>
		<tr>
			<td>
				<table class="factionTable">
					<tr>
						<td>Faction:</td>
						<td id="factionSelect"></td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td id="squadBuilderPanel"></td>
		</tr>
	</table>
	<script type="text/jsx">
    "use strict";
    var LOGGER = new Logger();
	LOGGER.setTraceEnabled(false);
	LOGGER.setDebugEnabled(false);

	var team = Team.IMPERIAL;
    React.render(createTeamSelect(), document.getElementById("factionSelect"));
    React.render(<SquadBuilderUI team={team} />, 
		document.getElementById("squadBuilderPanel"));
    
    function teamChanged(event)
    {
        team = event.currentTarget.value;
		LOGGER.info("teamChanged() team = " + team);
    	React.render(createTeamSelect(), document.getElementById("factionSelect"));
        React.render(<SquadBuilderUI team={team} />, 
				document.getElementById("squadBuilderPanel"));
    }

    function createTeamSelect()
    {
        return createSelect(Team.values, Team.properties, team, teamChanged);
    }
    
    function createSelect(values, properties, selectedValue, onChangeFunction)
    {
        var options = [];

        for(var i=0; i<values.length; i++)
        {
            var value = values[i];
            var label = properties[value].name;
            options[i] = <option key={i} value={value}>{label}</option>
        }
        
        return <select value={selectedValue} onChange={onChangeFunction}>{options}</select>
    }
    </script>
</body>
</html>
